/*
MIT Licensed - https://raw.github.com/aron/smart-storage/master/LICENSE
Copyright (c) 2010 Andy Hume (http://andyhume.net, andyhume@gmail.com)
*/
function SmartStorage(a){SmartStorage.browserIsSupported()&&(this.dbname=a)}SmartStorage.prototype._setItemForDb=function(a,b,c,d){return b=JSON.stringify(b),c&&(b=(new Date).getTime()+c+"--cache--"+b),localStorage.setItem(this.dbname+"_"+a,b)},SmartStorage.prototype._getItemForDb=function(a,b){var c=this.dbname+"_"+a,d=localStorage.getItem(c);return d&&(d=SmartStorage.getCachableValue(d)),JSON.parse(d)},SmartStorage.prototype._removeItemForDb=function(a){return localStorage.removeItem(this.dbname+"_"+a)},SmartStorage.prototype.remove=function(a){if(arguments.length<1)throw"SmartStorage error: remove() requires 1 argument.";return this._removeItemForDb(a)},SmartStorage.prototype.set=function(a,b,c,d){if(arguments.length<2)throw"SmartStorage error: set() requires at least 2 arguments.";if(SmartStorage.typeOf(b)==="function")throw"SmartStorage error: Can't store function reference.";return this._setItemForDb(a,b,c,d)},SmartStorage.prototype.get=function(a,b){if(arguments.length<1)throw"SmartStorage error: get() requires 1 argument.";return this._getItemForDb(a,b)},SmartStorage.getCachableValue=function(a){if(a.indexOf("--cache--")>-1){var b=a.split("--cache--");(new Date).getTime()>b[0]?a=null:a=b[1]}return a},SmartStorage.browserIsSupported=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(a){return!1}},SmartStorage.typeOf=function(a){var b=typeof a;return b==="object"&&(a?a instanceof Array?b="array":a instanceof String&&(b="string"):b="null"),b}
